# Default config for sway
#
# Copy this to ~/.config/sway/config and edit it to your liking.
#
# Read `man 5 sway` for a complete reference.

### Variables
#
# Logo key. Use Mod1 for Alt.
set $mod Mod4
# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l
# Your preferred terminal emulator
set $term foot
# Your preferred application launcher
set $menu wofi --show drun --style ~/.config/waybar/scripts/wofi-dark.css --allow-images --prompt "Launch"

# Catppuccin Mocha
set $rosewater #f5e0dc
set $flamingo  #f2cdcd
set $pink      #f5c2e7
set $mauve     #cba6f7
set $red       #f38ba8
set $maroon    #eba0ac
set $peach     #fab387
set $yellow    #f9e2af
set $green     #a6e3a1
set $teal      #94e2d5
set $sky       #89dceb
set $sapphire  #74c7ec
set $blue      #89b4fa
set $lavender  #b4befe
set $text      #cdd6f4
set $subtext1  #bac2de
set $overlay0  #6c7086
set $surface1  #45475a
set $surface0  #313244
set $base      #1e1e2e
set $mantle    #181825
set $crust     #11111b

### Output configuration
#
# Default wallpaper (more resolutions are available in /usr/share/backgrounds/sway/)
output * bg /home/chad/Pictures/Wallpaper.png fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

# Window colors         border    bg       text     indicator child_border
client.focused           $mauve   $base    $text    $mauve    $mauve
client.focused_inactive  $surface1 $base   $subtext1 $surface1 $surface1
client.unfocused         $surface0 $base   $overlay0 $surface0 $surface0
client.urgent            $red     $base    $text    $red      $red

# Borders and gaps
default_border pixel 3
default_floating_border pixel 3
smart_borders off
smart_gaps off
gaps inner 8
gaps outer 4
# Show mark labels in the title bar (visible in tabbed/stacking layouts or with normal border)
# %marks renders as [a] when marked, empty string when not
for_window [all] title_format "%title <span foreground='$mauve'>%marks</span>"
# Prevent idle/screensaver while any window is fullscreen (videos, presentations)
for_window [all] inhibit_idle fullscreen
# Apps requesting focus flash as urgent instead of stealing focus
focus_on_window_activation smart
# Fullscreen apps can show their own popups without dropping out of fullscreen
popup_during_fullscreen smart

### Idle configuration
#
# Example configuration:
#
# exec swayidle -w \
#          timeout 300 'swaylock -f -c 000000' \
#          timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
#          before-sleep 'swaylock -f -c 000000'
#
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

### Input configuration
#
# Example configuration:
#
#   input type:touchpad {
#       dwt enabled
#       tap enabled
#       natural_scroll enabled
#       middle_emulation enabled
#   }
#
#   input type:keyboard {
#       xkb_layout "eu"
#   }
#
# You can also configure each device individually.
# Read `man 5 sway-input` for more information about this section.

input type:keyboard {
    # 300ms delay before key repeat starts, 40 repeats/sec
    repeat_delay 300
    repeat_rate 40
}

input type:pointer {
    natural_scroll enabled
}

input type:touchpad {
    natural_scroll enabled
    click_method clickfinger
}

### Key bindings
#
# ── Basics ───────────────────────────────────────────────────────
#

# Open terminal
bindsym $mod+Return exec $term

# Auto-float specific windows at a fixed size/position
for_window [app_id="wdisplays"] floating enable, resize set 800 600, move position center
for_window [title="^floating-htop$"] floating enable, resize set 900 500, move position center
for_window [title="^floating-btop$"] floating enable, resize set 1200 700, move position center
for_window [title="^floating-calendar$"] floating enable, move position center

# Open display manager (wdisplays)
bindsym $mod+p exec wdisplays

# Toggle floating btop system monitor
bindsym $mod+i exec ~/.config/sway/toggle-btop.sh

# Toggle microphone mute (updates waybar indicator)
bindsym $mod+m exec sh -c 'pactl set-source-mute @DEFAULT_SOURCE@ toggle; pkill -RTMIN+10 waybar'

# Open app launcher (wofi)
bindsym $mod+d exec $menu

# Hold $mod + left-click to drag floating windows;
# hold $mod + right-click to resize them
floating_modifier $mod normal

# Reload sway config in place
bindsym $mod+Shift+c reload

# Open logout/session menu (wlogout)
bindsym Ctrl+Alt+Delete exec wlogout
bindsym $mod+Shift+e exec wlogout

#
# ── Focus ────────────────────────────────────────────────────────
#

# Move focus directionally (vim keys)
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# Move focus directionally (arrow keys)
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move the focused window in a direction (vim keys)
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
# Move the focused window in a direction (arrow keys)
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Move focus up to the parent container (lets you act on the whole group)
bindsym $mod+a focus parent
# Move focus back down into the child container
bindsym $mod+z focus child

# Jump to the most recently urgent/flashing window
bindsym $mod+u [urgent=latest] focus

# Toggle focus between tiling area and floating area
bindsym $mod+space focus mode_toggle

# Alt-Tab: jump to the most urgent or recently used window (swayr)
bindsym Mod1+Tab exec swayr switch-to-urgent-or-lru-window
# Alt-Shift-Tab: open interactive window picker (swayr)
bindsym Mod1+Shift+Tab exec swayr switch-window

#
# ── Workspaces ───────────────────────────────────────────────────
#

# Re-pressing the current workspace number toggles back to the previous one
workspace_auto_back_and_forth yes

# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move focused container to workspace and follow it
bindsym $mod+Shift+1 move container to workspace number 1; workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2; workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3; workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4; workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5; workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6; workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7; workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8; workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9; workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10; workspace number 10

# Move focused container to workspace without following
bindsym $mod+Ctrl+1 move container to workspace number 1
bindsym $mod+Ctrl+2 move container to workspace number 2
bindsym $mod+Ctrl+3 move container to workspace number 3
bindsym $mod+Ctrl+4 move container to workspace number 4
bindsym $mod+Ctrl+5 move container to workspace number 5
bindsym $mod+Ctrl+6 move container to workspace number 6
bindsym $mod+Ctrl+7 move container to workspace number 7
bindsym $mod+Ctrl+8 move container to workspace number 8
bindsym $mod+Ctrl+9 move container to workspace number 9
bindsym $mod+Ctrl+0 move container to workspace number 10

# Toggle between the two most recently active workspaces
bindsym $mod+grave workspace back_and_forth
# Cycle to the previous workspace
bindsym $mod+bracketleft workspace prev
# Cycle to the next workspace
bindsym $mod+bracketright workspace next
# Move container to previous workspace and follow it
bindsym $mod+Shift+bracketleft move container to workspace prev; workspace prev
# Move container to next workspace and follow it
bindsym $mod+Shift+bracketright move container to workspace next; workspace next

#
# ── Multi-monitor ────────────────────────────────────────────────
#

# Move keyboard focus to the output on the left/right
bindsym $mod+comma focus output left
bindsym $mod+period focus output right
# Move the focused container to the output on the left/right
bindsym $mod+Shift+comma move container to output left
bindsym $mod+Shift+period move container to output right
# Move the entire current workspace to the output on the left/right
bindsym $mod+Ctrl+comma move workspace to output left
bindsym $mod+Ctrl+period move workspace to output right

#
# ── Layout ───────────────────────────────────────────────────────
#

# Set split direction to horizontal (next window opens to the right)
bindsym $mod+b splith
# Set split direction to vertical (next window opens below)
bindsym $mod+v splitv

# Set container layout to stacking (windows stacked with title bars)
bindsym $mod+s layout stacking
# Set container layout to tabbed (windows in tabs)
bindsym $mod+w layout tabbed
# Cycle through all layouts: splitv → splith → tabbed → stacking (like tmux next-layout)
bindsym $mod+e layout toggle splitv splith tabbed stacking

# Cycle the focused window's border style: none → normal → pixel
bindsym $mod+Ctrl+b border toggle

# Toggle fullscreen for the focused window (within its output)
bindsym $mod+f fullscreen
# Toggle global fullscreen (covers all outputs)
bindsym $mod+Shift+f fullscreen global

# Make a floating window sticky so it stays visible on all workspaces
bindsym $mod+t sticky toggle

# Toggle the focused window between tiling and floating
bindsym $mod+Shift+space floating toggle
#
# ── Scratchpad ───────────────────────────────────────────────────
#

# Send the focused window to the scratchpad (hidden floating layer)
bindsym $mod+Shift+minus move scratchpad
# Show/cycle scratchpad windows; hides the window if it's the only one
bindsym $mod+minus scratchpad show
#
# ── Marks ────────────────────────────────────────────────────────
#
# Marks let you tag windows with a letter and reference them later.
# Each mode below is activated with a key, then you press a letter (a-z).
#
#   $mod+Shift+m   → [mark mode]     label the focused window
#   $mod+'         → [goto mode]     jump focus to a labeled window
#   $mod+Shift+'   → [movetomark]    move focused window into a labeled window's container
#   $mod+Ctrl+'    → [swapmark]      swap the focused window with a labeled window
#   $mod+Ctrl+m    → remove all marks from the focused window

mode "mark" {
    bindsym a mark a; mode "default"
    bindsym b mark b; mode "default"
    bindsym c mark c; mode "default"
    bindsym d mark d; mode "default"
    bindsym e mark e; mode "default"
    bindsym f mark f; mode "default"
    bindsym g mark g; mode "default"
    bindsym h mark h; mode "default"
    bindsym i mark i; mode "default"
    bindsym j mark j; mode "default"
    bindsym k mark k; mode "default"
    bindsym l mark l; mode "default"
    bindsym m mark m; mode "default"
    bindsym n mark n; mode "default"
    bindsym o mark o; mode "default"
    bindsym p mark p; mode "default"
    bindsym q mark q; mode "default"
    bindsym r mark r; mode "default"
    bindsym s mark s; mode "default"
    bindsym t mark t; mode "default"
    bindsym u mark u; mode "default"
    bindsym v mark v; mode "default"
    bindsym w mark w; mode "default"
    bindsym x mark x; mode "default"
    bindsym y mark y; mode "default"
    bindsym z mark z; mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+m mode "mark"

mode "goto" {
    bindsym a [con_mark="a"] focus; mode "default"
    bindsym b [con_mark="b"] focus; mode "default"
    bindsym c [con_mark="c"] focus; mode "default"
    bindsym d [con_mark="d"] focus; mode "default"
    bindsym e [con_mark="e"] focus; mode "default"
    bindsym f [con_mark="f"] focus; mode "default"
    bindsym g [con_mark="g"] focus; mode "default"
    bindsym h [con_mark="h"] focus; mode "default"
    bindsym i [con_mark="i"] focus; mode "default"
    bindsym j [con_mark="j"] focus; mode "default"
    bindsym k [con_mark="k"] focus; mode "default"
    bindsym l [con_mark="l"] focus; mode "default"
    bindsym m [con_mark="m"] focus; mode "default"
    bindsym n [con_mark="n"] focus; mode "default"
    bindsym o [con_mark="o"] focus; mode "default"
    bindsym p [con_mark="p"] focus; mode "default"
    bindsym q [con_mark="q"] focus; mode "default"
    bindsym r [con_mark="r"] focus; mode "default"
    bindsym s [con_mark="s"] focus; mode "default"
    bindsym t [con_mark="t"] focus; mode "default"
    bindsym u [con_mark="u"] focus; mode "default"
    bindsym v [con_mark="v"] focus; mode "default"
    bindsym w [con_mark="w"] focus; mode "default"
    bindsym x [con_mark="x"] focus; mode "default"
    bindsym y [con_mark="y"] focus; mode "default"
    bindsym z [con_mark="z"] focus; mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+apostrophe mode "goto"

mode "movetomark" {
    bindsym a move container to mark a; mode "default"
    bindsym b move container to mark b; mode "default"
    bindsym c move container to mark c; mode "default"
    bindsym d move container to mark d; mode "default"
    bindsym e move container to mark e; mode "default"
    bindsym f move container to mark f; mode "default"
    bindsym g move container to mark g; mode "default"
    bindsym h move container to mark h; mode "default"
    bindsym i move container to mark i; mode "default"
    bindsym j move container to mark j; mode "default"
    bindsym k move container to mark k; mode "default"
    bindsym l move container to mark l; mode "default"
    bindsym m move container to mark m; mode "default"
    bindsym n move container to mark n; mode "default"
    bindsym o move container to mark o; mode "default"
    bindsym p move container to mark p; mode "default"
    bindsym q move container to mark q; mode "default"
    bindsym r move container to mark r; mode "default"
    bindsym s move container to mark s; mode "default"
    bindsym t move container to mark t; mode "default"
    bindsym u move container to mark u; mode "default"
    bindsym v move container to mark v; mode "default"
    bindsym w move container to mark w; mode "default"
    bindsym x move container to mark x; mode "default"
    bindsym y move container to mark y; mode "default"
    bindsym z move container to mark z; mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+apostrophe mode "movetomark"

mode "swapmark" {
    bindsym a swap container with mark a; mode "default"
    bindsym b swap container with mark b; mode "default"
    bindsym c swap container with mark c; mode "default"
    bindsym d swap container with mark d; mode "default"
    bindsym e swap container with mark e; mode "default"
    bindsym f swap container with mark f; mode "default"
    bindsym g swap container with mark g; mode "default"
    bindsym h swap container with mark h; mode "default"
    bindsym i swap container with mark i; mode "default"
    bindsym j swap container with mark j; mode "default"
    bindsym k swap container with mark k; mode "default"
    bindsym l swap container with mark l; mode "default"
    bindsym m swap container with mark m; mode "default"
    bindsym n swap container with mark n; mode "default"
    bindsym o swap container with mark o; mode "default"
    bindsym p swap container with mark p; mode "default"
    bindsym q swap container with mark q; mode "default"
    bindsym r swap container with mark r; mode "default"
    bindsym s swap container with mark s; mode "default"
    bindsym t swap container with mark t; mode "default"
    bindsym u swap container with mark u; mode "default"
    bindsym v swap container with mark v; mode "default"
    bindsym w swap container with mark w; mode "default"
    bindsym x swap container with mark x; mode "default"
    bindsym y swap container with mark y; mode "default"
    bindsym z swap container with mark z; mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Ctrl+apostrophe mode "swapmark"

# Remove all marks from the focused window
bindsym $mod+Ctrl+m unmark

#
# ── Resize / Move floating ───────────────────────────────────────
#
# Enter resize mode ($mod+r), then:
#   hjkl / arrows           fine resize (10px)
#   Shift + hjkl / arrows   coarse resize (50px)
#   Ctrl  + hjkl / arrows   move a floating window (20px)
#   Enter / Escape          return to default mode
mode "resize" {
    # Fine resize (10px)
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # Coarse resize (50px)
    bindsym Shift+$left resize shrink width 50px
    bindsym Shift+$down resize grow height 50px
    bindsym Shift+$up resize shrink height 50px
    bindsym Shift+$right resize grow width 50px
    bindsym Shift+Left resize shrink width 50px
    bindsym Shift+Down resize grow height 50px
    bindsym Shift+Up resize shrink height 50px
    bindsym Shift+Right resize grow width 50px

    # Move floating window
    bindsym Ctrl+$left move left 20px
    bindsym Ctrl+$down move down 20px
    bindsym Ctrl+$up move up 20px
    bindsym Ctrl+$right move right 20px
    bindsym Ctrl+Left move left 20px
    bindsym Ctrl+Down move down 20px
    bindsym Ctrl+Up move up 20px
    bindsym Ctrl+Right move right 20px

    # Return to default mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
# Enter resize/move mode
bindsym $mod+r mode "resize"

#
# ── Gaps / Appearance ────────────────────────────────────────────
#

# Toggle inner (8px) and outer (4px) gaps on the current workspace
bindsym $mod+g exec swaymsg "gaps inner current toggle 8, gaps outer current toggle 4"

#
# ── Session ──────────────────────────────────────────────────────
#

# Lock the screen
bindsym $mod+Escape exec swaylock --indicator-caps-lock

# Lid close: run lid-close script; lid open: re-enable built-in display
bindswitch --reload --locked lid:on exec ~/.config/sway/lid-close.sh
bindswitch --reload --locked lid:off output eDP-1 enable

#
# ── Media / Volume / Brightness ──────────────────────────────────
#

# Mute/unmute the default audio sink
bindsym --locked XF86AudioMute exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
# Lower volume by 5%
bindsym --locked XF86AudioLowerVolume exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
# Raise volume by 5%
bindsym --locked XF86AudioRaiseVolume exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
# Mute/unmute the default microphone (updates waybar indicator)
bindsym --locked XF86AudioMicMute exec sh -c 'pactl set-source-mute @DEFAULT_SOURCE@ toggle; pkill -RTMIN+10 waybar'

# Lower brightness by 5% (floor at 10% so screen never goes fully dark)
bindsym --locked XF86MonBrightnessDown exec sh -c 'brightnessctl set 5%-; [ $(brightnessctl get) -lt $(($(brightnessctl max) / 10)) ] && brightnessctl set 10%'
# Raise brightness by 5%
bindsym --locked XF86MonBrightnessUp exec brightnessctl set 5%+

# Play or pause the current media player
bindsym --locked XF86AudioPlay exec playerctl play-pause
# Pause the current media player
bindsym --locked XF86AudioPause exec playerctl pause
# Skip to the next track
bindsym --locked XF86AudioNext exec playerctl next
# Go back to the previous track
bindsym --locked XF86AudioPrev exec playerctl previous
# Stop the current media player
bindsym --locked XF86AudioStop exec playerctl stop

#
# ── Screenshots ───────────────────────────────────────────────────
#

# Full-screen screenshot → saved to ~/Pictures
bindsym --release Print exec sh -c 'dir="$HOME/Pictures"; mkdir -p "$dir"; file="$dir/screenshot-$(date +%Y%m%d-%H%M%S).png"; grim "$file" && notify-send "Screenshot saved" "$(basename "$file")"'

# Region select → copy to clipboard
bindsym --release $mod+Print exec sh -c 'slurp | grim -g - - | wl-copy && notify-send "Screenshot copied to clipboard"'

# Region select → saved to ~/Pictures
bindsym --release $mod+Shift+Print exec sh -c 'dir="$HOME/Pictures"; mkdir -p "$dir"; file="$dir/screenshot-$(date +%Y%m%d-%H%M%S).png"; slurp | grim -g - "$file" && notify-send "Screenshot saved" "$(basename "$file")"'

# Region select → copy to clipboard (alternate binding)
bindsym --release $mod+Shift+s exec sh -c 'slurp | grim -g - - | wl-copy && notify-send "Screenshot copied to clipboard"'

#
# ── Utilities ────────────────────────────────────────────────────
#

# Open clipboard history picker (cliphist + wofi)
bindsym $mod+Shift+v exec sh -c 'cliphist list | wofi --dmenu --style ~/.config/waybar/scripts/wofi-dark.css --prompt "Clipboard" | cliphist decode | wl-copy'

# Toggle the swaync notification center panel
bindsym $mod+n exec swaync-client -t

# Open zen
bindsym $mod+Shift+b exec sh -c 'zen-browser'

# Close / kill the focused window
bindsym $mod+BackSpace kill
bindsym $mod+c kill

# Toggle screen recording
bindsym $mod+Shift+r exec ~/.config/waybar/scripts/screen-record.sh

#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
bar {
    swaybar_command waybar
}

# Cursor theme
seat * xcursor_theme catppuccin-mocha-dark-cursors 24
# Hide cursor after 3 seconds of inactivity
seat * hide_cursor 3000


# SwayFX
blur enable
blur_passes 3
blur_radius 6
blur_xray disable

corner_radius 10

shadows enable
shadow_blur_radius 20
shadow_color #11111ba0
shadow_inactive_color #11111b60
shadow_offset 0 4

default_dim_inactive 0.15

layer_effects "waybar" blur enable; shadows enable; corner_radius 10
layer_effects "swaync" blur enable; shadows enable; corner_radius 12
layer_effects "swaync-control-center" blur enable; shadows enable
layer_effects "wofi" blur enable; shadows enable; corner_radius 12

# Propagate Wayland env to DBus and systemd — needed for XDG portals,
# screen sharing, file pickers, and tray apps to work correctly
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway

exec nm-applet --indicator
exec swaync
exec wl-paste --watch cliphist store
exec swayrd
exec kanshi


exec swayidle -w \
     timeout 300 'swaymsg "output * power off"' \
          resume 'swaymsg "output * power on"' \
     timeout 600 'swaylock -f --indicator-caps-lock' \
     timeout 650 'playerctl -a pause; systemctl hibernate' \
     before-sleep 'swaylock -f --indicator-caps-lock'


include /etc/sway/config.d/*
